# Obsidian Stock Ticker Wrapper

> **This plugin is opinionated.**

一个为 **Obsidian** 用户打造的智能股票代码识别与管理插件，面向 **投资研究 / 宏观分析 / 行业跟踪** 场景，自动识别文档中的股票代码（Ticker），并提供 **高亮、悬停信息、点击生成公司页面、行业数据补全** 等能力。

---

## ✨ 功能特性

### 🧠 智能识别股票代码

* 自动识别形如 `AAPL`、`TSLA`、`NVDA` 的股票代码
* 支持 **全文** 或 **选中区域** 处理
* 自动跳过以下内容，避免误伤：

  * YAML Frontmatter（Properties）
  * 代码块 ```
  * 被 `- _ * #` 等符号包裹的文本
* 内置大规模 **黑名单机制**，防止常见缩写被错误识别（如 CPU / GDP / API / AI 等）

---

### 🎯 高亮 + 悬停 + 点击

* 股票代码会被统一包裹为：`` `TICKER` ``
* 悬停显示：

  * 公司名称
  * 行业（Sector）
  * 细分领域（Industry）
* 点击股票代码：

  * 自动创建或打开对应的股票研究页面

---

### 📂 自动生成股票研究页面

* 统一存放路径：

```
经济/Stocks/{TICKER}.md
```

* 自动生成标准化 Frontmatter：

  * ticker
  * name
  * market
  * sector
  * industry
  * updated

* 页面结构专为**长期研究**设计，而非行情展示

---

### 🌐 行业与公司数据自动补全

数据来源组合设计：

* **DumbStock API**（NYSE / NASDAQ / AMEX）
* **SEC 官方公司列表**（EDGAR）
* **Finviz**（补全 sector / industry）

特性：

* 本地缓存，启动即用
* 支持强制刷新全部股票数据
* 网络失败时自动降级，不影响日常使用

---

## 🧭 设计动机 & 设计哲学

这个插件并不是为了“把 Obsidian 变成炒股软件”，而是为了解决一个在真实投资研究中长期存在的问题：

> **股票代码是知识的索引，而不是文本装饰。**

---

### 🎯 核心动机

在真实的投资研究过程中：

* 股票代码会反复出现在：

  * 宏观分析
  * 行业研究
  * 事件记录
  * 个人判断
* 但大多数工具要么：

  * 侵入性过强
  * 误伤大量普通英文缩写
  * 或破坏原有笔记结构

**Stock Ticker Wrapper 的目标很明确：**

> 在不打扰写作体验的前提下，让股票代码自然升级为可导航、可扩展的研究入口。

---

### 🛡️ 克制优先，而非功能堆砌

本插件刻意遵循以下设计原则：

* **不修改你没有明确要求修改的内容**

  * Frontmatter 受保护
  * 代码块受保护
  * 明确边界的文本受保护

* **宁可少包，也不误包**

  * 严格的正则边界控制
  * 大规模黑名单过滤

* **失败必须安静**

  * 网络失败不影响本地使用
  * 数据缺失优先使用缓存

---

### 📂 股票页面不是数据库，而是研究容器

自动生成的股票页面并不是为了：

* 展示股价
* 展示实时财务数据

而是为了：

* 承载你的：

  * 投资逻辑
  * 关键事件
  * 长期跟踪判断

形成稳定的研究结构：

```
宏观 → 行业 → 公司 → 个人判断
```

因此：

* 页面模板保持极简
* 不引入时间敏感数据
* 判断权完全交还给使用者

---

### 🧠 面向长期使用者的工具

这个插件假设你是：

* 会持续写研究笔记的人
* 会反复回看旧判断的人
* 在意结构、稳定性与可演进性的人

它不是为一次性整理而设计，而是为 **多年尺度的研究积累** 服务的。

---

## 📦 安装方式

### 手动安装（推荐）

1. 克隆或下载本仓库
2. 将整个目录复制到：

```
<你的 Obsidian Vault>/.obsidian/plugins/stock-ticker-wrapper/
```

3. 确保目录内至少包含：

   * `main.js`
   * `manifest.json`

4. 重启 Obsidian

5. 在 **设置 → 第三方插件** 中启用插件

---

## ⌨️ 可用命令

在命令面板（`Cmd/Ctrl + P`）中：

* **Smart Format Stock Tickers**
  智能扫描并高亮股票代码

* **Force Update Stock Data Source**
  强制从网络刷新全部股票数据

* **Update Metadata for Current Stock Page**
  更新当前股票页面的行业 / 细分领域信息

---

## 🧪 示例

原文：

```
NVDA 和 TSLA 在 AI 产业链中占据核心位置。
```

处理后：

```
`NVDA` 和 `TSLA` 在 AI 产业链中占据核心位置。
```

点击 `NVDA` 后将自动生成：

```
经济/Stocks/NVDA.md
```

---

## 🗂️ 股票页面模板示例

```markdown
---
ticker: NVDA
name: NVIDIA Corp.
market: NASDAQ
sector: Technology
industry: Semiconductors
updated: 2026-02-06
---

## 公司简介

## 投资逻辑

## 关键事件

## 估值与财务

## 我的观点
```

---

## ⚠️ 已知限制

* 行业数据依赖 Finviz 页面结构（非官方 API）
* 当前主要覆盖美股与 ASX 市场
* 不适用于加密货币代码

---

## 📜 License

MIT License

---

## 🤝 致谢

* Obsidian 官方 API
* DumbStock API
* SEC EDGAR
* Finviz

---

如果你正在使用 Obsidian 构建 **长期投资研究系统**，这个插件正是为这种使用方式而设计的。🚀
